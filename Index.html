<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TheBikerZone Minimal</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
<script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
<script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
</head>
<body>
<div id="root"></div>

<script>
const { useState, useEffect } = React;

// 🔥 Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyBmbEztflh7PrcHKggM2-lzoMhzNkOup5o",
  authDomain: "thebikerzone-54094.firebaseapp.com",
  projectId: "thebikerzone-54094",
  storageBucket: "thebikerzone-54094.firebasestorage.app",
  messagingSenderId: "654294837831",
  appId: "1:654294837831:web:1c73e7707de9a2fd4a5f62"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

function App() {
  const [user, setUser] = useState(null);
  const [posts, setPosts] = useState([]);
  const [newPost, setNewPost] = useState({ title:"", content:"" });

  // Quick Auth fittizio
  const join = () => {
    const username = prompt("Inserisci username") || "BikerUser"+Math.floor(Math.random()*1000);
    setUser({ username, uid:"user_"+Date.now() });
  };

  // Carica post
  useEffect(()=>{
    db.collection("posts").orderBy("created_at","desc").onSnapshot(snap=>{
      setPosts(snap.docs.map(d=>({id:d.id,...d.data()})));
    });
  },[]);

  const submitPost = async (e)=>{
    e.preventDefault();
    if(!user) return alert("Devi prima unirti!");
    await db.collection("posts").add({
      ...newPost,
      username:user.username,
      created_at: firebase.firestore.FieldValue.serverTimestamp()
    });
    setNewPost({ title:"", content:"" });
  };

  return React.createElement("div",{className:"p-4 font-sans"},
    React.createElement("h1",{className:"text-3xl font-bold mb-4"},"🏍️ TheBikerZone"),
    !user && React.createElement("button",{onClick:join,className:"bg-orange-600 text-white px-4 py-2 rounded mb-4"},"Join Community"),
    user && React.createElement("form",{onSubmit:submitPost,className:"mb-4 space-y-2"},
      React.createElement("input",{className:"w-full p-2 border rounded",placeholder:"Titolo",value:newPost.title,onChange:e=>setNewPost({...newPost,title:e.target.value})}),
      React.createElement("textarea",{className:"w-full p-2 border rounded",placeholder:"Contenuto",value:newPost.content,onChange:e=>setNewPost({...newPost,content:e.target.value})}),
      React.createElement("button",{type:"submit",className:"bg-green-600 text-white px-4 py-2 rounded"},"Post")
    ),
    React.createElement("div",null,
      posts.map(post=>React.createElement("div",{key:post.id,className:"p-2 border-b"},
        React.createElement("h2",{className:"font-bold"},post.title),
        React.createElement("p",null,post.content),
        React.createElement("p",{className:"text-sm text-gray-500"},"by "+post.username)
      ))
    )
  );
}

ReactDOM.createRoot(document.getElementById("root")).render(React.createElement(App));
</script>
</body>
</html>
